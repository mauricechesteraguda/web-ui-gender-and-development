<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Panel</title>
    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
    />
    <!-- Font Awesome CSS -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"
    />
    <!-- AdminLTE CSS -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/admin-lte/3.1.0/css/adminlte.min.css"
    />

    <!-- DataTables CSS -->
    <link
      rel="stylesheet"
      type="text/css"
      href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css"
    />

    <link rel="stylesheet" href="../assets/css/style.css" />
  </head>
  <body class="hold-transition sidebar-mini">
    <div class="wrapper">
      <!-- Navbar -->
      <nav class="main-header navbar navbar-expand navbar-black navbar-dark">
        <!-- Left navbar links -->
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link" data-widget="pushmenu" href="#" role="button"
              ><i class="fas fa-bars"></i
            ></a>
          </li>
        </ul>

        <!-- Right navbar links -->
        <!-- <ul class="navbar-nav ml-auto">
          <li class="nav-item">
            <a class="nav-link" href="#">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">About</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Resources</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Contact</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="login.html">Register / Login</a>
          </li>
        </ul> -->
      </nav>

      <!-- Sidebar -->
      <aside class="main-sidebar sidebar-dark-primary elevation-4">
        <!-- Brand Logo -->
        <a href="#" class="brand-link bg-light">
          <img
            src="../assets\img\gad_logo.png"
            alt="AdminLTE Logo"
            class="brand-image img-circle elevation-3"
            style="opacity: 0.8"
          />
          <span class="brand-text font-weight-light">GAD-ISS</span>
        </a>

        <!-- Sidebar Menu -->
        <div class="sidebar">
          <nav class="mt-2">
            <ul
              class="nav nav-pills nav-sidebar flex-column"
              data-widget="treeview"
              role="menu"
              data-accordion="false"
            >
              <!-- Sidebar items -->
              <li class="nav-item">
                <a href="../index.html" class="nav-link">
                  <i class="nav-icon fas fa-tachometer-alt"></i>
                  <p>Dashboard</p>
                </a>
              </li>
              <li class="nav-item">
                <a href="campuses.html" class="nav-link">
                  <i class="nav-icon fas fa-hotel"></i>
                  <p>Campuses</p>
                </a>
              </li>
              <li class="nav-item">
                <a href="../pages/users.html" class="nav-link">
                  <i class="nav-icon fas fa-users"></i>
                  <p>Users</p>
                </a>
              </li>
              <li class="nav-item menu-open">
                <a href="#" class="nav-link">
                  <i class="nav-icon fas fa-question"></i>

                  <p>Survey Forms</p>

                  <i class="right fas fa-angle-left"></i>
                </a>
                <ul class="nav nav-treeview">
                  <li class="nav-item">
                    <a
                      href="tna.html
                    "
                      class="nav-link"
                    >
                      <i class="fa fa-users-cog nav-icon"></i>
                      <p>TNA</p>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a href="gfps.html" class="nav-link">
                      <i class="fa fa-tag nav-icon"></i>
                      <p>GFPS</p>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a href="#" class="nav-link active">
                      <i class="fa fa-window-restore nav-icon"></i>
                      <p>GMEF</p>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a href="great.html" class="nav-link">
                      <i class="fa fa-gem nav-icon"></i>
                      <p>GREAT</p>
                    </a>
                  </li>
                </ul>
              </li>
              <li class="nav-item">
                <a href="responses.html" class="nav-link">
                  <i class="nav-icon fas fa-reply"></i>
                  <p>Responses</p>
                </a>
              </li>
              <li class="nav-item">
                <a href="gad.html" class="nav-link">
                  <i class="nav-icon fas fa-money-bill-alt"></i>
                  <p>GAD Plan Budget</p>
                </a>
              </li>
              <li class="nav-item">
                <a href="reports.html" class="nav-link">
                  <i class="nav-icon fas fa-file-alt"></i>
                  <p>Reports</p>
                </a>
              </li>

              <!-- User Settings -->

              <li class="nav-item">
                <a href="#" class="nav-link">
                  <div class="container user-panel mt-3 pb-3 mb-3 d-flex">
                    <div class="row">
                      <div class="col">
                        <img
                          src="../assets/img/avatar.jpg"
                          class="img-circle"
                        />
                      </div>
                      <div>
                        <p>Alice Graham</p>
                      </div>
                      <div><i class="right fas fa-angle-left p-1"></i></div>
                    </div>
                  </div>
                </a>
                <ul class="nav nav-treeview">
                  <li class="nav-item">
                    <a href="#" class="nav-link">
                      <i class="fa fa-cog nav-icon"></i>
                      <p>Settings</p>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a href="../../index.html" class="nav-link">
                      <i class="fa fa-sign-out-alt nav-icon"></i>
                      <p>Sign Out</p>
                    </a>
                  </li>
                </ul>
              </li>
            </ul>
          </nav>
        </div>
      </aside>

      <!-- Content Wrapper -->
      <div class="content-wrapper">
        <div class="content">
          <div class="container-fluid">
            <!-- Your content goes here -->

            <div class="content-header">
              <div class="container-fluid">
                <div class="row mb-2">
                  <div class="col-sm-6">
                    <h1 class="m-0">
                      Gender Mainstream Evaluation Framework - Survey Management
                    </h1>
                  </div>
                  <div class="col-sm-6">
                    <ol class="breadcrumb float-sm-right">
                      <li class="breadcrumb-item"><a href="#">Home</a></li>
                      <li class="breadcrumb-item">GMEF</li>
                    </ol>
                  </div>
                </div>
              </div>
            </div>

            <section class="content">
              <div class="container-fluid">
                <div class="row">
                  <div class="col-12">
                    <div class="card">
                      <div class="card-header">
                        <button class="btn btn-primary mr-2">
                          Add New Survey
                        </button>

                        <a
                          href="questions/gmef.html"
                          class="btn btn-outline-primary"
                        >
                          Manage Questions
                        </a>
                      </div>

                      <!-- /.card-header -->

                      <div class="card-body">
                        <div class="table-responsive">
                          <table id="surveyTable" class="table table-bordered">
                            <thead>
                              <tr>
                                <th>#</th>
                                <th>Year</th>
                                <th>Link</th>
                                <th>Status</th>

                                <th>Actions</th>
                              </tr>
                            </thead>
                            <tbody>
                              <tr>
                                <td>1</td>
                                <td>2023</td>
                                <td>
                                  https://gad-iss.x10host.com/great/fgdgreferg
                                </td>
                                <td>
                                  <span class="badge badge-danger">
                                    Closed</span
                                  >
                                </td>

                                <td>
                                  <div class="btn-group" role="group">
                                    <button class="btn btn-primary btn-sm">
                                      Edit
                                    </button>
                                    <a
                                      href="#"
                                      class="btn btn-outline-primary btn-sm show-qr-code"
                                      >Show QR Code</a
                                    >
                                    <button
                                      class="btn btn-outline-danger btn-sm"
                                    >
                                      Delete
                                    </button>
                                  </div>
                                </td>
                              </tr>
                              <tr>
                                <td>2</td>
                                <td>2024</td>
                                <td>
                                  https://gad-iss.x10host.com/great/hreytewegdfg
                                </td>
                                <td>
                                  <span class="badge badge-success">
                                    Enabled</span
                                  >
                                </td>

                                <td>
                                  <div class="btn-group" role="group">
                                    <button class="btn btn-primary btn-sm">
                                      Edit
                                    </button>
                                    <a
                                      href="#"
                                      class="btn btn-outline-primary btn-sm show-qr-code"
                                      >Show QR Code</a
                                    >

                                    <button
                                      class="btn btn-outline-danger btn-sm"
                                    >
                                      Delete
                                    </button>
                                  </div>
                                </td>
                              </tr>
                            </tbody>
                          </table>
                          <!-- Modal -->
                          <div
                            class="modal fade"
                            id="qrModal"
                            tabindex="-1"
                            role="dialog"
                            aria-labelledby="qrModalLabel"
                            aria-hidden="true"
                          >
                            <div
                              class="modal-dialog modal-dialog-centered"
                              role="document"
                            >
                              <div class="modal-content">
                                <div class="modal-header">
                                  <h5 class="modal-title" id="qrModalLabel">
                                    Survey QR Code
                                  </h5>
                                  <button
                                    type="button"
                                    class="close"
                                    data-dismiss="modal"
                                    aria-label="Close"
                                  >
                                    <span aria-hidden="true">&times;</span>
                                  </button>
                                </div>
                                <div class="container-fluid">
                                  <div class="row">
                                    <div
                                      class="modal-body col-12"
                                      id="qrCodeContainer"
                                    ></div>
                                  </div>
                                  <div class="row">
                                    <div class="col-md-12">
                                      <form>
                                        <div class="form-group">
                                          <input
                                            class="form-control"
                                            id="urlText"
                                            value=""
                                          />
                                        </div>
                                      </form>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <!-- /.table-responsive -->
                  </div>
                  <!-- /.card-body -->
                  <div class="card-footer clearfix">
                    <!-- Pagination and other controls will be handled by DataTables -->
                  </div>
                </div>
                <!-- /.card -->
              </div>
              <!-- /.col -->
              <div id="qrcode"></div>

              <!-- DataTables CSS -->
              <link
                rel="stylesheet"
                type="text/css"
                href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.css"
              />

              <!-- jQuery -->
              <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

              <!-- DataTables JS -->
              <script
                type="text/javascript"
                charset="utf8"
                src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.js"
              ></script>

              <script>
                $(document).ready(function () {
                  $("#surveyTable").DataTable();
                });
              </script>

              <!-- /.container-fluid -->
            </section>
          </div>
          <!-- /.container-fluid -->
        </div>
        <!-- /.content -->
      </div>
      <!-- /.content-wrapper -->

      <!-- Footer -->
      <footer class="main-footer">
        <div class="float-right d-none d-sm-inline">Version 1.0</div>
        <strong>Admin Panel &copy; 2024</strong>
      </footer>
    </div>
    <!-- ./wrapper -->

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

    <!-- Bootstrap JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <!-- AdminLTE JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/admin-lte/3.1.0/js/adminlte.min.js"></script>

    <!-- DataTables JavaScript -->
    <script
      type="text/javascript"
      src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"
    ></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>

    <script>
      // <![CDATA[  <-- For SVG support
      if ("WebSocket" in window) {
        (function () {
          function refreshCSS() {
            var sheets = [].slice.call(document.getElementsByTagName("link"));
            var head = document.getElementsByTagName("head")[0];
            for (var i = 0; i < sheets.length; ++i) {
              var elem = sheets[i];
              var parent = elem.parentElement || head;
              parent.removeChild(elem);
              var rel = elem.rel;
              if (
                (elem.href && typeof rel != "string") ||
                rel.length == 0 ||
                rel.toLowerCase() == "stylesheet"
              ) {
                var url = elem.href.replace(/(&|\?)_cacheOverride=\d+/, "");
                elem.href =
                  url +
                  (url.indexOf("?") >= 0 ? "&" : "?") +
                  "_cacheOverride=" +
                  new Date().valueOf();
              }
              parent.appendChild(elem);
            }
          }
          var protocol =
            window.location.protocol === "http:" ? "ws://" : "wss://";
          var address =
            protocol + window.location.host + window.location.pathname + "/ws";
          var socket = new WebSocket(address);
          socket.onmessage = function (msg) {
            if (msg.data == "reload") window.location.reload();
            else if (msg.data == "refreshcss") refreshCSS();
          };
          if (
            sessionStorage &&
            !sessionStorage.getItem("IsThisFirstTime_Log_From_LiveServer")
          ) {
            console.log("Live reload enabled.");
            sessionStorage.setItem("IsThisFirstTime_Log_From_LiveServer", true);
          }
        })();
      } else {
        console.error(
          "Upgrade your browser. This Browser is NOT supported WebSocket for Live-Reloading."
        );
      }
      // ]]>
    </script>
    <script type="text/javascript">
      $(document).ready(function () {
        $("#surveyTable").DataTable();
      });
    </script>
    <script>
      $(document).ready(function () {
        $('[data-toggle="tooltip"]').tooltip();
      });
    </script>
    <script>
      $(document).ready(function () {
        window.qrCode = "";

        $("#surveyTable").DataTable();

        // Handle click event for "Show QR Code" button
        $("#surveyTable tbody").on("click", ".show-qr-code", function () {
          var url = $(this).closest("tr").find("td:eq(2)").text().trim();

          window.qrCode = new QRCode(
            document.getElementById("qrCodeContainer"),
            {
              text: url,
              width: 200,
              height: 200,
              colorDark: "#000000",
              colorLight: "#ffffff",
              correctLevel: QRCode.CorrectLevel.H,
            }
          );
          document.getElementById("urlText").value = url.trim();
          // "http://chart.apis.google.com/chart?cht=qr&chs=300x300&chl=" +
          // url.trim();

          $("#qrModal").modal("show");
        });
      });
    </script>
    <script>
      // Clear QR code when modal is hidden
      $("#qrModal").on("hidden.bs.modal", function () {
        document.getElementById("qrCodeContainer").innerHTML = "";
      });
    </script>
  </body>
</html>
